"use strict";class StateCache{#t=new Map;constructor(){}#e(t){let e;switch(t.type){case"number":e=parseFloat(t.value);break;case"checkbox":e=t.checked;break;case"select-one":e=t.value;break;default:e=null}"number"===t.type&&"number"==typeof e&&isNaN(e)&&(e=null);let a=this.#t.get(t.id);void 0!==a&&(a.value=e)}#a(t){t.classList.add("error"),setTimeout((()=>{t.classList.remove("error")}),2e3)}addArray(t){t.forEach((t=>{if(void 0===this.#t.get(t)){const e=document.getElementById(t);if(null!==e&&"INPUT"===e.tagName){const t=e;t.addEventListener("change",(()=>{this.#e(t)})),this.#t.set(t.id,{dom:t,value:null}),this.#e(t)}}}))}add(...t){this.addArray(t)}loadArray(t){let e=new Map;return t.forEach((t=>{let a=this.#t.get(t);void 0!==a&&e.set(t,a.value)})),e}load(...t){return this.loadArray(t)}loadAll(){let t=new Map;return this.#t.forEach(((e,a)=>{t.set(a,e.value)})),t}save(t,e){const a=this.#t.get(t);if(void 0===a)return;a.value=e;const o=a.dom;"checkbox"===o.type&&"boolean"==typeof e?o.checked=e:"string"==typeof e&&(o.value=e)}isValid(t,e=!1){const a=this.#t.get(t);if(void 0===a)return!1;const o=null!==a.value;return!o&&e&&this.#a(a.dom),o}isValidArray(t,e=!1){let a=!0;return t.forEach((t=>{a=this.isValid(t,e)&&a})),a}}class profileStorage{#o;constructor(t){this.#o=t,this.#n()}#n(){let t=[""];for(let e=0,a=localStorage.length;e<a;e++)t.push(localStorage.key(e));t.sort(),this.#o.innerHTML="",t.forEach((t=>{let e=new Option(t,t);this.#o.appendChild(e)}))}#i(t,e){const a=document.getElementById(t);null!==a&&(a.className=e,setTimeout((()=>{a.className="off"}),500))}add(){let t=prompt("Enter the name of the profile:");for(;""===t;)t=prompt("Name cannot be blank:");null!==t&&(localStorage.setItem(t,""),this.#n(),this.#o.value=t,this.save())}save(){const t=this.#o.value;if(""===t)return void this.add();const e=autofunction.cache.loadAll();localStorage.setItem(t,JSON.stringify(e)),this.#i("save","active")}load(){const t=this.#o.value;let e=localStorage.getItem(t);if(""===t||null===e)return void this.#i("load","error");const a=JSON.parse(e);for(let t in a)autofunction.cache.save(t,a[t]);this.#i("load","active")}remove(){const t=this.#o.value;if(""===t)return;confirm("Are you sure you want to delete: "+t)&&(localStorage.removeItem(t),this.#n())}}class autofunction{delay;#s;#l=setTimeout((()=>{}),0);#c=new Map;#r=[];#u=[];#d=0;#f=0;#h=!1;#p=!1;#g;stage=0;static cache=new StateCache;constructor(t,e,a,o,n,i){this.delay=e;const s=document.getElementById(t);if(null===s||"BUTTON"!==s.tagName)throw"Error";this.#s=s,this.#v(),this.#d=o.length,this.#r=a,this.#u=n,this.#g=i,o.forEach((t=>{this.#c.set(t,null)})),autofunction.cache.addArray(a)}get active(){return this.#h}set active(t){this.setActive(t)}get inputs(){return this.#r}get dependents(){return this.#u}setActive(t=!this.#h){this.active!==t&&(this.#h=t,this.#v(),t?(this.stage=0,this.#m()):clearTimeout(this.#l))}#v(){this.#s.className=this.active?"active":"off"}#m(){const t=this.validateInputs(!0);t?this.#y((()=>{const e=this.#p;this.#p=!1,this.#g({states:this.#c,inputs:autofunction.cache.loadArray(this.inputs)}),!this.#p&&e&&this.#v(),-1===this.delay&&(this.active=!1),this.active&&t&&(this.#l=setTimeout((()=>{this.#m()}),this.delay))})):this.error()}#y(t){if(0===this.#d)t();else{this.#f=0;for(let e in this.#c)read(e,(a=>{this.#w(e,a,t)}))}}#w(t,e,a){this.#c.set(t,e),this.#f++,this.#f===this.#d&&a()}validateInputs(t=!1){let e=autofunction.cache.isValidArray(this.inputs,t);return this.#u.forEach((a=>{e=autofunction.cache.isValidArray(a.inputs,t)&&e})),e}arm(){this.#p=!0,this.#s.className="armed"}error(){this.active=!1,this.#s.className="error",this.#l=setTimeout((()=>{this.#v()}),2e3)}}function cyclical(t,e=360){return t=(t%e+e)%e}function dms(t,e=0,a=0){return Math.sign(t)*(Math.abs(t)+e/60+a/3600)}function calcLLfromHD(t,e,a,o,n=0){a=90-a-n,a*=toRad;const i=(o/=60)*Math.sin(a)+t;return[i,o*Math.cos(a)/Math.cos(toRad*(t+i)*.5)+e]}function calcLLdistance(t,e,a,o){const n=60*(a-t);return((60*(o-e)*Math.cos(.5*(t+a)*toRad))**2+n**2)**.5}function controlThrottle(t,e,a){write("spdon",!1),write("throttle",t>0?-80:-100),write("spd",e),write("spoilers",1),a&&(write("spdon",!0),write("spoilers",2))}function showfpl(t,e,a){const o=document.createElement("input"),n=document.createElement("br");o.type="number",o.id=t,a.innerHTML+=" "+e,a.appendChild(o),a.appendChild(n)}function speak(t){t=t.toString();const e=document.getElementById("voices"),a=speechSynthesis.getVoices(),o=e.selectedIndex;let n=document.getElementById("utterancerate").value;""===n&&(n=1);const i=new SpeechSynthesisUtterance(t);i.rate=n,i.voice=a[o],speechSynthesis.speak(i)}speechSynthesis.getVoices();const toDeg=180/Math.PI,toRad=Math.PI/180;function setAll(t){const e="off"===t;autogear.active=e,autospoilers.active=e,autotrim.active=e,autoflaps.active=e,autolights.active=e,autobrakes.active=e,autospeed.active=e,document.getElementById("all").className=e?"active":"off"}function config(){const t={autoflaps:{instance:autoflaps,checked:document.getElementById("configflaps").checked},autospeed:{instance:autospeed,checked:document.getElementById("configspeed").checked},autotakeoff:{instance:autotakeoff,checked:document.getElementById("configtakeoff").checked},flypattern:{instance:flypattern,checked:document.getElementById("configpattern").checked},autoland:{instance:autoland,checked:document.getElementById("configland").checked}};let e=[];for(const a in t)if(t[a].checked){const o=t[a].instance.inputs,n=t[a].instance.dependents;o.forEach((t=>{-1===e.indexOf(t)&&e.push(t)})),n.forEach((t=>{t.inputs.forEach((t=>{-1===e.indexOf(t)&&e.push(t)}))}))}e.forEach((t=>{const e=document.getElementById(t);if("number"===e.type){const a=prompt(e.placeholder+"\nLeave blank to not change");""!==a&&(e.value=a,autofunction.cache.save(t,a))}}))}function dependencyCheck(t){"autoland"===t&&autoland.active&&autofunction.cache.load("approach")?autofunction.cache.save("approach",!1):"flypattern"===t&&flypattern.active?(autoland.active=!1,flyto.active=!1):"flyto"===t&&flyto.active&&(flypattern.active=!1,autoland.active=!1)}const autotrim=new autofunction("trim",1e3,[],["pitch","trim","onground"],[],(t=>{const e=t.states;if(e.onground)return void autotrim.arm();let a=10;if(Math.abs(e.pitch)<10?a=1:Math.abs(e.pitch)<50&&(a=5),Math.abs(e.pitch)>=2){let t=e.trim+a*Math.sign(e.pitch);t=Math.round(t/a)*a,write("trim",t)}})),autolights=new autofunction("lights",2e3,[],["altitudeAGL","onground","onrunway","gear"],[],(t=>{const e=t.states;write("master",!0),write("beaconlights",!0),write("navlights",!0),e.onground?(write("strobelights",e.onrunway),write("landinglights",e.onrunway)):(write("strobelights",!0),e.altitudeAGL<1e3&&e.gear?write("landinglights",!0):write("landinglights",!1))})),autogear=new autofunction("gear",1e3,[],["gear","altitudeAGL","verticalspeed"],[],(t=>{const e=t.states;let a=e.gear;e.altitudeAGL<100||e.verticalspeed<=-500&&e.altitudeAGL<1500?a=!0:(e.verticalspeed>=500||e.altitudeAGL>=2e3)&&(a=!1),a!==e.gear&&read("commands/LandingGear")})),autobrakes=new autofunction("autobrakes",1e3,[],["leftbrake","rightbrake","autobrakes","onground","onrunway","groundspeed"],[],(t=>{const e=t.states;let a=e.autobrakes;e.onground&&!e.onrunway?a=0:e.onground?e.onrunway&&(a=3):a=2,e.onground&&e.groundspeed>30&&(e.leftbrake>.3||e.rightbrake>.3)&&(a=0),a!==e.autobrakes&&write("autobrakes",a)})),autoflaps=new autofunction("flaps",1e3,["flaplow","flaphigh","flapto"],["flaps","airspeed","altitudeAGL","verticalspeed","flapcount","onground","onrunway"],[],(t=>{const e=t.inputs,a=t.states;if(e.flapto<0||e.flapto>a.flapcount-1||e.flaphigh<e.flaplow)return void autoflaps.error();let o=a.flaps;if(a.onground)o=a.onrunway?e.flapto:0;else if(a.altitudeAGL>=250){const t=a.flapcount-1,n=(e.flaphigh-e.flaplow)/t;o=Math.round((e.flaphigh-a.airspeed)/n),o<0?o=0:o>t&&(o=t)}(a.verticalspeed>=500&&o>a.flaps||a.verticalspeed<=-500&&o<a.flaps)&&(o=a.flaps),o!==a.flaps&&write("flaps",o)})),autospoilers=new autofunction("spoilers",1e3,[],["spoilers","airspeed","spd","altitude","altitudeAGL","onrunway","onground"],[],(t=>{const e=t.states;let a=0;e.onrunway||!e.onground&&e.altitudeAGL<1e3?a=2:e.airspeed-e.spd>=20&&e.altitude<28e3&&(a=1),a!==e.spoilers&&write("spoilers",a)})),levelchange=new autofunction("levelchange",1e3,["flcinput","flcmode"],["airspeed","altitude","alt","vs"],[],(t=>{const e=t.inputs,a=t.states;let o=e.flcinput;const n=a.alt-a.altitude;Math.abs(n)<100?levelchange.active=!1:("v"===e.flcmode&&(o=6076.12*Math.tan(o*toRad)),"f"!==e.flcmode&&(o*=Math.sign(n)*(a.airspeed/60)),o=100*Math.round(o/100),o!==a.vs&&write("vs",o))})),markposition=new autofunction("markposition",-1,[],["latitude","longitude","altitude","heading"],[],(t=>{const e=t.states;autofunction.cache.save("latref",e.latitude),autofunction.cache.save("longref",e.longitude),autofunction.cache.save("hdgref",Math.round(e.heading)),autofunction.cache.save("altref",Math.round(e.altitude))})),setrunway=new autofunction("setrunway",-1,[],["route","coordinates"],[],(t=>{const e=t.states,a=e.route.split(",");let o=-1;for(let t=0,e=a.length;t<e;t++)if(0===a[t].search(/RW\d\d.*/)){o=t;break}if(-1===o)return void setrunway.error();const n=e.coordinates.split(" ")[o].split(",");autofunction.cache.save("latref",parseFloat(n[0])),autofunction.cache.save("longref",parseFloat(n[1])),autofunction.cache.save("hdgref",parseInt(a[o][2]+a[o][3]+"0"))})),flyto=new autofunction("flyto",1e3,["flytolat","flytolong","flytohdg"],["latitude","longitude","variation","groundspeed","wind","winddir"],[],(t=>{const e=t.inputs,a=t.states;if(calcLLdistance(a.latitude,a.longitude,e.flytolat,e.flytolong)<1)return void(flyto.active=!1);const o=60*(e.flytolat-a.latitude),n=60*(e.flytolong-a.longitude)*Math.cos(.5*(a.latitude+e.flytolat)*toRad);let i=cyclical(Math.atan2(n,o)*toDeg-a.variation);let s=cyclical(e.flytohdg)-i;s>180?s-=360:s<-180&&(s+=360),Math.abs(s)<5?i-=-.1*s**3+8.5*s:i-=30*Math.sign(s);let l=90-i,c=90-cyclical(a.winddir-a.variation+180);l*=toRad,c*=toRad;const r=2*a.groundspeed*Math.cos(l),u=2*a.groundspeed*Math.sin(l),d=a.wind*Math.cos(c),f=a.wind*Math.sin(c);i=cyclical(Math.atan2(r-d,u-f)*toDeg),write("hdg",i)})),flypattern=new autofunction("flypattern",1e3,["latref","longref","hdgref","updist","downwidth","finallength","turnconst","leg","direction","approach"],["latitude","longitude","variation","onrunway","groundspeed"],[],(t=>{const e=t.inputs,a=t.states,o=["u","c","d","b","f"];let n=o.indexOf(e.leg);const i="r"===e.direction?1:-1,s=e.hdgref+90*i,l=[e.hdgref,s,e.hdgref+180,s+180,e.hdgref];let c=[];c[0]=calcLLfromHD(e.latref,e.longref,e.hdgref,e.updist+1.5,a.variation),c[1]=calcLLfromHD(c[0][0],c[0][1],s,e.downwidth,a.variation),c[3]=calcLLfromHD(e.latref,e.longref,e.hdgref+180,e.finallength,a.variation),c[2]=calcLLfromHD(c[3][0],c[3][1],s,e.downwidth,a.variation),c[4]=[e.latref,e.longref];const r=calcLLdistance(a.latitude,a.longitude,c[n][0],c[n][1]);r<a.groundspeed/60/(e.turnconst/a.groundspeed*60*toRad)&&(4!==n||4===n&&r<1)&&(n=(n+1)%5),4===n&&e.approach&&(autoland.active=!0),autofunction.cache.save("leg",o[n]),autofunction.cache.save("flytolat",c[n][0]),autofunction.cache.save("flytolong",c[n][1]),autofunction.cache.save("flytohdg",cyclical(l[n])),flyto.active=!0})),autospeed=new autofunction("autospeed",1e3,["latref","longref","climbspd","spdref","cruisespd","cruisealt"],["onground","airspeed","verticalspeed","altitudeAGL","altitude","throttle","latitude","longitude","spd"],[],(t=>{const e=t.inputs,a=t.states;if(a.onground)return void autospeed.arm();const o=autofunction.cache.load("altref").altref,n=null===o?a.altitudeAGL:a.altitude-o;if(autoland.active){let t=10*(calcLLdistance(a.latitude,a.longitude,e.latref,e.longref)-2.5)+e.spdref;t=Math.min(t,a.spd),t=10*Math.round(t/10),t=Math.max(t,e.spdref),write("spd",t)}else flypattern.active||autotakeoff.active&&a.verticalspeed>500&&n<=1e4&&e.climbspd-a.airspeed<10&&(write("spd",e.climbspd),write("spdon",!0));a.verticalspeed<-500&&n<=12e3&&n>=1e4&&write("spd",250),a.verticalspeed>500&&n>1e4&&write("spd",e.cruisespd)})),goaround=new autofunction("goaround",-1,["climbalt","climbspd","climbtype","flapto"],["altitude","vs"],[levelchange,autoflaps,autogear,autospoilers],(t=>{const e=t.inputs,a=t.states;autospeed.active=!1,autoland.error(),autofunction.cache.save("flcmode","g"),autofunction.cache.save("flcinput",500),autofunction.cache.save("leg","u");let o=e.climbalt;const n="msl"===e.climbtype,i=100*Math.round(a.altitude/100);o+=n?0:i,write("spd",e.climbspd),write("alt",o),write("spdon",!0),write("alton",!0),write("flaps",e.flapto),a.vs<0&&write("vs",0),flypattern.active=!0,setTimeout((()=>{levelchange.active=!0}),500),autoflaps.active=!0,autogear.active=!0,autospoilers.active=!0})),autoland=new autofunction("autoland",1e3,["latref","longref","altref","hdgref","vparef","flare","touchdown","option"],["latitude","longitude","altitude","groundspeed","onrunway"],[levelchange,autoflaps,autogear,autospeed,flypattern,goaround,autospoilers],(t=>{const e=t.inputs,a=t.states;0===autoland.stage&&(autofunction.cache.save("leg","f"),autofunction.cache.save("flcmode","v"),autoland.stage++);const o=calcLLfromHD(e.latref,e.longref,e.hdgref,e.touchdown/6076.12),n=6076.12*calcLLdistance(a.latitude,a.longitude,o[0],o[1]),i=e.option;if(2===autoland.stage||n<=1e3)autoland.stage=2,autospeed.active=!1,levelchange.active=!1,autofunction.cache.save("flcmode","g"),autofunction.cache.save("flcinput",500),write("vs",-200),"p"!==i&&(write("spdon",!1),write("throttle",-100)),"p"===i?(autoland.active=!1,setTimeout((()=>{goaround.active=!0}),1e4)):"l"===i?(autoland.active=!1,flypattern.active=!1,flyto.active=!1):"t"===i&&a.onrunway?(autoland.active=!1,setTimeout((()=>{autotakeoff.active=!0}),5e3)):"s"===i&&a.groundspeed<1&&(autoland.active=!1,autotakeoff.active=!0);else{const t=a.altitude-e.altref,o=Math.asin(t/n)*toDeg;let s=2;n<=6076&&(s=.5);let l=o-s*(e.vparef-o);l=Math.round(10*l)/10,l=Math.min(l,e.vparef+.5),l<e.vparef-.5&&(l=0),autofunction.cache.save("flcinput",l);write("alt",e.altref+e.flare),levelchange.active=!0,autospeed.active=!0,flypattern.active=!0,autoflaps.active=!0,autospeed.active=!0,autospoilers.active=!0,autogear.active="p"!==i}})),rejecttakeoff=new autofunction("reject",-1,[],[],[],(t=>{autotakeoff.active?(autotakeoff.error(),write("throttle",-100)):rejecttakeoff.error()})),takeoffconfig=new autofunction("takeoffconfig",-1,["climbalt","climbtype"],["onground","heading","altitude"],[],(t=>{const e=t.inputs,a=t.states;if(!a.onground)return void takeoffconfig.error();const o="msl"===e.climbtype,n=100*Math.round(a.altitude/100);e.climbalt+=o?0:n,write("alt",e.climbalt),write("hdg",a.heading),write("vs",0),write("parkingbrake",!1)})),autotakeoff=new autofunction("autotakeoff",500,["rotate","climbspd","climbthrottle","takeoffspool","takeofflnav","takeoffvnav"],["onrunway","n1","airspeed","altitude","altitudeAGL"],[takeoffconfig,levelchange,autotrim,autogear,autoflaps,autospoilers,rejecttakeoff],(t=>{const e=t.inputs,a=t.states,o=2*e.climbthrottle-100;let n=autotakeoff.stage;if(0===n){if(!a.onrunway)return void autotakeoff.error();takeoffconfig.active=!0,levelchange.active=!1,autoland.active=!1,autogear.active=!0,autoflaps.active=!0,autospoilers.active=!0,write("spd",e.climbspd),write("autopilot",!0),write("alton",!0),write("vson",!1),write("hdgon",!0),write("throttle",e.takeoffspool?-20:o),n++}else 1===n?(write("vson",!0),e.takeoffspool?(null===a.n1||a.n1>=40)&&(write("throttle",o),n++):n++):2===n?a.airspeed>=e.rotate&&(levelchange.active=!0,n++):3===n?e.climbspd-a.airspeed<10&&(e.takeofflnav&&write("navon",!0),e.takeoffvnav&&(vnav.active=!0),write("spdon",!0),n++):autotakeoff.active=!1;autotakeoff.stage=n})),updatefpl=new autofunction("updatefpl",-1,[],["fplinfo"],[],(t=>{const e=t.states,a=JSON.parse(e.fplinfo),o=a.detailedInfo.flightPlanItems;let n=document.getElementById("waypoints");if(null===document.getElementById(`index${o.length-1}children0`)||null!==o[o.length-1].children&&null===document.getElementById(`index${o.length-1}children${o.children.length-1}`)){n.innerHTML="";for(let t=0;t<o.length;t++){let e;if(null===o[t].children)e=a.detailedInfo.waypoints[t],showfpl(`index${t}children0`,e,n);else for(let a=0;a<o[t].children.length;a++)e=o[t].children[a].identifier,showfpl(`index${t}children${a}`,e,n)}}})),vnav=new autofunction("vnav",1e3,[],["fplinfo","onground","autopilot","airspeed","groundspeed","altitude","vnav","vs","latitude","longitude"],[],(t=>{const e=t.states,a=JSON.parse(e.fplinfo),o=a.waypointName,n=a.detailedInfo.flightPlanItems,i=[],s=[];let l,c,r,u,d=vnav.stage;if(e.onground||!e.autopilot||e.vnav||levelchange.active)vnav.error();else{updatefpl.active=!0;for(let t=0,e=n.length;t<e;t++)if(null===n[t].children)n[t].identifier!==o&&n[t].name!==o||(l=t,c=0,r=n[t].altitude),t>=l&&-1!==n[t].altitude&&(i.push(n[t].altitude),s.push([n[t].location.Latitude,n[t].location.Longitude]));else for(let e=0;e<n[t].children.length;e++)n[t].children[e].identifier===o&&(l=t,c=e,r=n[t].children[e].altitude),t>=l&&e>=c&&-1!==n[t].children[e].altitude&&(i.push(n[t].children[e].altitude),s.push([n[t].children[e].location.Latitude,n[t].children[e].location.Longitude]));if(null!==document.getElementById(`index${l}children${c}`)){const t=document.getElementById(`index${l}children${c}`).value;""!==t&&a.distanceToNext<=10&&write("spd",t)}if(0===i.length)return speak("No altitude restriction, VNAV disabled"),void vnav.error();if(-1!==r){const t=(r-e.altitude)/a.eteToNext;write("alt",r),write("vs",t)}else{u=calcLLdistance(a.nextWaypointLatitude,a.nextWaypointLongitude,s[0][0],s[0][1]);const t=(i[0]-e.altitude)/((a.distanceToNext+u)/e.groundspeed*60);write("alt",i[0]),write("vs",t)}vnav.stage=d}})),callout=new autofunction("callout",250,["rotate","utterancerate","minumuns"],["onrunway","airspeed","verticalspeed","throttle","gear","altitudeAGL","altitude"],[],(t=>{const e=t.inputs,a=t.states,o=e.rotate,n=e.rotate+10,i=autofunction.cache.load("altref").altref,s=null===i?a.altitudeAGL:a.altitude-i;let l=callout.stage;0===l&&(callout.flags=[!1,!1,!1,!1,!1,!1,!1,!1],l++),1===l&&a.airspeed>=o&&a.onrunway&&a.throttle>40?(speak("V1"),l++):2===l&&a.airspeed>=e.rotate&&a.onrunway&&a.throttle>40?(speak("Rotate"),l++):3===l&&a.airspeed>=n&&a.throttle>40&&(speak("V2"),l++),!speechSynthesis.speaking&&a.verticalspeed<-500&&!a.gear&&s<=1e3&&speak("Landing Gear"),!speechSynthesis.speaking&&a.verticalspeed<-500&&s<=e.minumuns+10&&s>=e.minumuns&&speak("Minimums");const c=[1e3,500,100,50,40,30,20,10];if(a.verticalspeed<-500)for(let t=0,e=c.length-1;t<e;t++)if(!speechSynthesis.speaking&&s<=c[t]&&s>c[t+1]&&!callout.flags[t]){speak(c[t]),callout.flags[t]=!0;break}callout.stage=l})),autofunctions=[autotrim,autolights,autogear,autoflaps,levelchange,markposition,setrunway,flyto,flypattern,rejecttakeoff,takeoffconfig,autotakeoff,autoland,goaround,autospeed,autobrakes,vnav,callout,updatefpl,autospoilers],socket=io();function bridge(){setVisibility(!0);let t=document.getElementById("address").value;const e=t.split(".");""!==t&&(e.length<2&&(t="1."+t),e.length<3&&(t="168."+t),e.length<4&&(t="192."+t)),socket.emit("bridge",t,(t=>{statLog.innerText=t,console.log(t)}))}function closeBridge(){reset(),socket.emit("break",(t=>{statLog.innerText=t,console.log(t)}))}function read(t,e){socket.emit("read",t,(t=>{e(t)}))}function readAsync(t,e){socket.emit("readAsync",t,(t=>{e(t)}))}function readLog(t){read(t,(t=>{console.log(t)}))}function write(t,e){socket.emit("write",t,e)}function setVisibility(t){for(let e=1,a=panels.length;e<a;e++){panels[e].hidden=t}}function reset(){setVisibility(!0),autofunctions.forEach((t=>{t.active&&(t.active=!1)}))}let statLog=document.getElementById("status"),panels=document.getElementsByClassName("panel");const storage=new profileStorage(document.getElementById("configselect")),select=document.getElementById("voices"),voices=speechSynthesis.getVoices();for(let t=0,e=voices.length;t<e;t++){const e=new Option(voices[t].lang,t.toString());select.add(e)}socket.emit("test",(t=>{statLog.innerText=t,console.log(t)})),socket.on("ready",(t=>{document.getElementById("address").value=t,setVisibility(!1)})),socket.on("log",(t=>{statLog.innerText=t,console.log(t)}));