<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Infinite Flight API</title>

		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">

        <script src="socket.io.min.js"></script>
        <script src="script.js"></script>
		<script src="controller.js"></script>

		<link href="style.css" rel="stylesheet">
	</head>
    <body onload="loaded();">
        <h3>Status: <span id="status">offline</span></h3>
        <label for="address">IP Address: </label>
		<input id="address" onkeypress="if(event.key === 'Enter'){bridge();}" type="text" autocomplete="off" value="">
        <button onclick="bridge();">Connect</button>
        <button onclick="closeBridge();">Close</button>
        <h3>NOTE: Ensure you are loaded into a flight before connecting!</h3>
        <div id="autopilot" hidden>
			<h3>NOTE: Restart the connection if you start a new flight.</h3>
			<br>
            <h2>API Controller</h2>
			<div>
				<button class="off">Standby</button>
				<button class="active">Active</button>
				<button class="armed">Armed</button>
				<button class="error">Error</button>
			</div>
			<br><br>
			<div class="mode">
				<h3>Dynamic Systems</h3>
				<button id="trim" onclick="autotrim.changeActive();" class="off">TRIM</button>
				<button id="lights" onclick="autolights.changeActive();" class="off">LIGHTS</button>
				<button id="gear" onclick="autogear.changeActive();" class="off">GEAR</button>
				<br><br>

				<input id="flaplow" type="number" value="120" min="0" step="5">
				<input id="flaphigh" type="number" value="200" min="0" step="5">
				<input id="flapto" type="number" value="2" min="0" step="1">
				<button id="flaps" onclick="autoflaps.changeActive();" class="off">FLAPS</button>
				<br><br>

				<ol>
					<li><label for="flaplow">Max Flaps Speed</label></li>
					<li><label for="flaphigh">Clean Speed</label></li>
					<li><label for="flapto">Takeoff Flap Number</label></li>
				</ol>

				<ul>
					<li>Takeoff flap is the config setting, not the degree.</li>
				</ul>
			</div>
			<div class="mode">
				<h3>Auto Takeoff</h3>

                <input id="rotate" type="number" value="130" min="0" step="5">
				<input id="climbspd" type="number" value="200" min="0" step="5">
                <input id="climbn1" type="number" value="90" min="0" max="100" step="1">
				<input id="climbalt" type="number" value="3000" min="0" step="100">
                <select id="climbtype">
                    <option value="msl">MSL</option>
                    <option value="agl">AGL</option>
                </select>
				<br><br>

				<button id="takeoffconfig" onclick="takeoffconfig.changeActive();" class="off">CONFIGURE FOR TAKEOFF</button>
				<br><br>

				<button id="autotakeoff" onclick="autotakeoff.changeActive();" class="off">AUTO TAKEOFF</button>
				<button id="reject" onclick="rejecttakeoff.changeActive();" class="off">REJECT TAKEOFF</button>
				<br><br>

                <input id="takeoffspool" type="checkbox">
				<label for="takeoffspool">Spool First</label>
                <input id="takeoffnav" type="checkbox">
				<label for="takeoffnav">Engage LNAV</label>
				<br><br>

				<ol>
					<li><label for="rotate">Rotate (kts)(VR)</label></li>
					<li><label for="climbspd">Climb Speed (kts)</label></li>
                    <li><label for="climbn1">Climb Throttle (%)</label></li>
					<li><label for="climbalt">Top Altitude (ft)</label></li>
                    <li><label for="climbtype">Altitude Type</label></li>
				</ol>
				<ul>
					<li>This will use the climb rate set in the autoflight pannel.</li>
					<br>
					<li>You must still input rudder to maintian centerline.</li>
					<br>
					<li>You must be on a runway for these to work.</li>
				</ul>
			</div>
			<div class="mode">
				<h3>Flight Director</h3>

                <input id="lat" type="number" value="39.51367" min="-90" max="90">
				<input id="long" type="number" value="-119.76675" min="-180" max="180">
				<input id="hdg" type="number" value="167" min="0" max="360" step="1">
				<button id="flyto" onclick="flyto.changeActive();" class="off">FLY TO</button>
				<br><br>

				<select id="flcmode" onchange="fixflcinput(this.value);">
					<option value="g">Gradient (ft/nm)</option>
					<option value="v">VPA (deg)</option>
				</select>
				<input id="flcinput" type="number" value="500" min="0" step="100">
				<button id="levelchange" onclick="levelchange.changeActive();" class="off">LEVEL CHANGE</button>
				<br><br>

				<ol>
					<li><label for="lat">Latitude (deg)</label></li>
					<li><label for="long">Longitude (deg)</label></li>
					<li><label for="hdg">Heading (deg)</label></li>
				</ol>
				<ol>
					<li><label for="flcmode">Change Mode</label></li>
					<li><label for="flcinput">Change Rate</label></li>
				</ol>
				<ul>
					<li>Leave heading blank for direct to.</li>
				</ul>
			</div>
			<div class="mode">
				<h3>Pattern Work</h3>

                <input id="updist" type="number" value="2" min="0" step="0.5">
				<input id="downwidth" type="number" value="5" min="0" step="0.5">
				<input id="finallength" type="number" value="6" min="0" step="0.5">
				<input id="turnconst" type="number" value="350" min="0" max="1000" step="5">
				<br><br>

				<input id="latref" type="number" value="39.51367" min="-90" max="90">
				<input id="longref" type="number" value="-119.76675" min="-180" max="180">
				<input id="hdgref" type="number" value="167" min="0" max="360" step="1">
				<br><br>

				<button id="markposition" onclick="markposition.changeActive();" class="off">MARK POSITION</button>
				<button id="setrunway" onclick="setrunway.changeActive();" class="off">SET RUNWAY</button>
				<br><br>

				<select id="direction">
					<option value="l">Left</option>
					<option value="r">Right</option>
				</select>
				<select id="leg">
					<option value="u">Upwind</option>
					<option value="c">Crosswind</option>
					<option value="d">Downwind</option>
					<option value="b">Base</option>
					<option value="f">Final</option>
				</select>
				<button id="flypattern" onclick="flypattern.changeActive();" class="off">FLY PATTERN</button>
				<br><br>

                <input id="approach" type="checkbox">
				<label for="approach">Approach on Final</label>
                <br><br>

				<ol>
					<li><label for="updist">Upwind Distance (nm)</label></li>
					<li><label for="downwidth">Downwind Width (nm)</label></li>
					<li><label for="finallength">Final Distance (nm)</label></li>
					<li><label for="turnconst">Turn Constant (degkts)</label></li>
				</ol>
				<ol>
					<li><label for="latref">Latitude Reference (deg)</label></li>
					<li><label for="longref">Longitude Reference (deg)</label></li>
					<li><label for="hdgref">Heading Reference (deg)</label></li>
				</ol>
				<ol>
					<li><label for="direction">Traffic Direction</label></li>
					<li><label for="leg">Current Leg</label></li>
				</ol>
				<ul>
					<li>Runway will set the first RWXX in your FPL as the target.</li>
					<br>
					<li>You must still update the heading to the exact runway heading.</li>
					<br>
					<li>Info about the turn constant is on the issues page of the github.</li>
				</ul>
			</div>
            <div class="mode">
				<h3>Approach and Land</h3>

                <h3>WORK IN PROGRESS: Only Land works for now, no speed control yet.</h3>

                <input id="altref" type="number" step="1" value="0" min="0">
                <input id="spdref" type="number" step="5" value="130" min="0">
                <br><br>

                <input id="touchdown" type="number" value="1000" min="0" step="100">
                <input id="flare" type="number" value="10" min="0" step="5">
                <input id="vparef" type="number" value="3" min="0" max="6" step="0.1">
                <br><br>

                <select id="option">
                    <option value="l">Land</option>
                    <option value="t">Touch & Go</option>
                    <option value="p">Low Pass</option>
                    <option value="s">Stop & Go</option>
                </select>
				<button id="autoland" onclick="autoland.changeActive();" class="off">APPROACH</button>
                <button id="goaround" onclick="goaround.changeActive();" class="off">GO AROUND</button>

                <ol>
                    <li><label for="altref">Runway Elevation (ft)(Field)</label></li>
                    <li><label for="spdref">Landing Speed (kts)</label></li>
                </ol>
                <ol>
                    <li><label for="touchdown">Touchdown Distance (ft)(From threshold)</label></li>
                    <li><label for="flare">Flare Height (ft)</label></li>
                    <li><label for="vparef">VPA Refrence (deg)</label></li>
                </ol>
                <ol>
                    <li><label for="option">Option for Approach</label></li>
                </ol>
                <ul>
                    <li>This uses the runway refrences in pattern work.</li>
                    <li>Go Around uses autotakeoff settings.</li>
                </ul>
			</div>
        </div>
    </body>
</html>